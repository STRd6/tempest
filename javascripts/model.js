!function(){var Model,Observable,__slice=[].slice;require("athletic-support");Observable=require("./observable");Model=function(I){var self;self=Core(I).extend({attrObservable:function(){var names;names=1<=arguments.length?__slice.call(arguments,0):[];names.each(function(name){self[name]=Observable(I[name]);return self[name].observe(function(newValue){return I[name]=newValue})});return self},attrModel:function(name,Model){var model;if(Model==null){Model=name.classify().constantize()}model=Model(I[name]);self[name]=Observable(model);self[name].observe(function(newValue){return I[name]=newValue.I});return self},attrModels:function(name,Model){var models;if(Model==null){Model=name.classify().constantize()}models=(I[name]||[]).map(Model);self[name]=Observable(models);self[name].observe(function(newValue){return I[name]=newValue.map(function(instance){return instance.I})});return self},observeAll:function(){return self.attrObservable.apply(self,Object.keys(I))},toJSON:function(){return I}});return self};module.exports=Model}.call(this);